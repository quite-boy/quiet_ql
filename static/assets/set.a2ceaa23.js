import{f as e,h as t,l as a,s as r,i as l}from"./index.5a69ed12.js";import{u as i,s as n,f as o}from"./stringify.e342a6c0.js";import{r as s,b as u,u as c,o as p,c as d,d as f,w as y,C as m,j as v,m as g}from"./vendor.9be83040.js";var h=i,b=Object.prototype.hasOwnProperty,w=Array.isArray,O={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:h.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},x=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},j=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},S=function(e,t,a,r){if(e){var l=a.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,n=a.depth>0&&/(\[[^[\]]*])/.exec(l),o=n?l.slice(0,n.index):l,s=[];if(o){if(!a.plainObjects&&b.call(Object.prototype,o)&&!a.allowPrototypes)return;s.push(o)}for(var u=0;a.depth>0&&null!==(n=i.exec(l))&&u<a.depth;){if(u+=1,!a.plainObjects&&b.call(Object.prototype,n[1].slice(1,-1))&&!a.allowPrototypes)return;s.push(n[1])}return n&&s.push("["+l.slice(n.index)+"]"),function(e,t,a,r){for(var l=r?t:j(t,a),i=e.length-1;i>=0;--i){var n,o=e[i];if("[]"===o&&a.parseArrays)n=[].concat(l);else{n=a.plainObjects?Object.create(null):{};var s="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,u=parseInt(s,10);a.parseArrays||""!==s?!isNaN(u)&&o!==s&&String(u)===s&&u>=0&&a.parseArrays&&u<=a.arrayLimit?(n=[])[u]=l:n[s]=l:n={0:l}}l=n}return l}(s,t,a,r)}},L={formats:o,parse:function(e,t){var a=function(e){if(!e)return O;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?O.charset:e.charset;return{allowDots:void 0===e.allowDots?O.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:O.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:O.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:O.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:O.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:O.comma,decoder:"function"==typeof e.decoder?e.decoder:O.decoder,delimiter:"string"==typeof e.delimiter||h.isRegExp(e.delimiter)?e.delimiter:O.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:O.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:O.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:O.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:O.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:O.strictNullHandling}}(t);if(""===e||null==e)return a.plainObjects?Object.create(null):{};for(var r="string"==typeof e?function(e,t){var a,r={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,n=l.split(t.delimiter,i),o=-1,s=t.charset;if(t.charsetSentinel)for(a=0;a<n.length;++a)0===n[a].indexOf("utf8=")&&("utf8=%E2%9C%93"===n[a]?s="utf-8":"utf8=%26%2310003%3B"===n[a]&&(s="iso-8859-1"),o=a,a=n.length);for(a=0;a<n.length;++a)if(a!==o){var u,c,p=n[a],d=p.indexOf("]="),f=-1===d?p.indexOf("="):d+1;-1===f?(u=t.decoder(p,O.decoder,s,"key"),c=t.strictNullHandling?null:""):(u=t.decoder(p.slice(0,f),O.decoder,s,"key"),c=h.maybeMap(j(p.slice(f+1),t),(function(e){return t.decoder(e,O.decoder,s,"value")}))),c&&t.interpretNumericEntities&&"iso-8859-1"===s&&(c=x(c)),p.indexOf("[]=")>-1&&(c=w(c)?[c]:c),b.call(r,u)?r[u]=h.combine(r[u],c):r[u]=c}return r}(e,a):e,l=a.plainObjects?Object.create(null):{},i=Object.keys(r),n=0;n<i.length;++n){var o=i[n],s=S(o,r[o],a,"string"==typeof e);l=h.merge(l,s,a)}return!0===a.allowSparse?l:h.compact(l)},stringify:n};const N={key:0},k=v("保存配置"),_=v("保存公告"),P=v("保存logo"),A=v("保存底部"),E={key:1},C=v("登录"),D={setup(i){const n=s(null);let o=s(null),v=s(null),h=s(null),b=s(!!sessionStorage.getItem("flag")&&sessionStorage.getItem("flag")),w=s(null),O=s({});const x=async()=>{if(200==(await a({key:w.value})).data.data.code)return b.value=!0,g.success("登录成功"),void sessionStorage.setItem("flag",!0);g.success("登录失败")},j=async(e,t)=>{await r(L.stringify({key:e,value:t})),g.success("修改成功")},S=async()=>{await l({data:n.value}),g.success("修改成功")};return(async()=>{const t=await e();n.value=t.data.data})(),(async()=>{const e=await t();O.value=JSON.parse(e.data.data),o.value=O.value.quiet.LOG,v.value=O.value.quiet.LOGO,h.value=O.value.quiet.Footer})(),(e,t)=>{const a=u("a-textarea"),r=u("a-button"),l=u("a-form-item"),i=u("a-input"),s=u("a-card"),g=u("a-form");return c(b)?(p(),d("div",N,[f(s,{title:"系统配置"},{default:y((()=>[f(l,{label:"配置文件",style:{"text-align":"center"}},{default:y((()=>[f(a,{autosize:"",value:n.value,"onUpdate:value":t[0]||(t[0]=e=>n.value=e)},null,8,["value"]),f(r,{type:"primary",onClick:S,style:{"margin-top":"30px"}},{default:y((()=>[k])),_:1})])),_:1}),f(l,{label:"修改公告",style:{"text-align":"center"}},{default:y((()=>[f(a,{autosize:"",value:c(o),"onUpdate:value":t[1]||(t[1]=e=>m(o)?o.value=e:o=e)},null,8,["value"]),f(r,{type:"primary",onClick:t[2]||(t[2]=e=>j("LOG",c(o))),style:{"margin-top":"30px"}},{default:y((()=>[_])),_:1})])),_:1}),f(l,{label:"修改logo",style:{"text-align":"center"}},{default:y((()=>[f(i,{value:c(v),"onUpdate:value":t[3]||(t[3]=e=>m(v)?v.value=e:v=e)},null,8,["value"]),f(r,{type:"primary",onClick:t[4]||(t[4]=e=>j("LOGO",c(v))),style:{"margin-top":"30px"}},{default:y((()=>[P])),_:1})])),_:1}),f(l,{label:"修改底部",style:{"text-align":"center"}},{default:y((()=>[f(i,{value:c(h),"onUpdate:value":t[5]||(t[5]=e=>m(h)?h.value=e:h=e)},null,8,["value"]),f(r,{type:"primary",onClick:t[6]||(t[6]=e=>j("Footer",c(h))),style:{"margin-top":"30px"}},{default:y((()=>[A])),_:1})])),_:1})])),_:1})])):(p(),d("div",E,[f(s,null,{default:y((()=>[f(g,{"wrapper-col":{span:10},"label-col":{span:3}},{default:y((()=>[f(l,{label:"登录key",style:{"text-align":"center"}},{default:y((()=>[f(i,{value:c(w),"onUpdate:value":t[7]||(t[7]=e=>m(w)?w.value=e:w=e)},null,8,["value"]),f(r,{type:"primary",style:{"margin-top":"30px"},onClick:x},{default:y((()=>[C])),_:1})])),_:1})])),_:1})])),_:1})]))}}};export{D as default};
