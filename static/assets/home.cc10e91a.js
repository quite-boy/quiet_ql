import{t,r as e,v as a,a as n,b as r,o as i,c as s,d as u,w as o,F as l,m as d,e as c,u as f,x as h,U as m,y as v,z as g,j as $,B as p,C as y,h as S}from"./vendor.9be83040.js";import"./stringify.e342a6c0.js";import{g as _,e as M,a as w,b as D,c as b,d as O}from"./index.5a69ed12.js";var k={exports:{}},Y=k.exports=function(){var t=1e3,e=6e4,a=36e5,n="millisecond",r="second",i="minute",s="hour",u="day",o="week",l="month",d="quarter",c="year",f="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},$=function(t,e,a){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(a)+t},p={s:$,z:function(t){var e=-t.utcOffset(),a=Math.abs(e),n=Math.floor(a/60),r=a%60;return(e<=0?"+":"-")+$(n,2,"0")+":"+$(r,2,"0")},m:function t(e,a){if(e.date()<a.date())return-t(a,e);var n=12*(a.year()-e.year())+(a.month()-e.month()),r=e.clone().add(n,l),i=a-r<0,s=e.clone().add(n+(i?-1:1),l);return+(-(n+(a-r)/(i?r-s:s-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:c,w:o,d:u,D:f,h:s,m:i,s:r,ms:n,Q:d}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",S={};S[y]=g;var _=function(t){return t instanceof b},M=function(t,e,a){var n;if(!t)return y;if("string"==typeof t)S[t]&&(n=t),e&&(S[t]=e,n=t);else{var r=t.name;S[r]=t,n=r}return!a&&n&&(y=n),n||!a&&y},w=function(t,e){if(_(t))return t.clone();var a="object"==typeof e?e:{};return a.date=t,a.args=arguments,new b(a)},D=p;D.l=M,D.i=_,D.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var b=function(){function g(t){this.$L=M(t.locale,null,!0),this.parse(t)}var $=g.prototype;return $.parse=function(t){this.$d=function(t){var e=t.date,a=t.utc;if(null===e)return new Date(NaN);if(D.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(m);if(n){var r=n[2]-1||0,i=(n[7]||"0").substring(0,3);return a?new Date(Date.UTC(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},$.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},$.$utils=function(){return D},$.isValid=function(){return!(this.$d.toString()===h)},$.isSame=function(t,e){var a=w(t);return this.startOf(e)<=a&&a<=this.endOf(e)},$.isAfter=function(t,e){return w(t)<this.startOf(e)},$.isBefore=function(t,e){return this.endOf(e)<w(t)},$.$g=function(t,e,a){return D.u(t)?this[e]:this.set(a,t)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(t,e){var a=this,n=!!D.u(e)||e,d=D.p(t),h=function(t,e){var r=D.w(a.$u?Date.UTC(a.$y,e,t):new Date(a.$y,e,t),a);return n?r:r.endOf(u)},m=function(t,e){return D.w(a.toDate()[t].apply(a.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),a)},v=this.$W,g=this.$M,$=this.$D,p="set"+(this.$u?"UTC":"");switch(d){case c:return n?h(1,0):h(31,11);case l:return n?h(1,g):h(0,g+1);case o:var y=this.$locale().weekStart||0,S=(v<y?v+7:v)-y;return h(n?$-S:$+(6-S),g);case u:case f:return m(p+"Hours",0);case s:return m(p+"Minutes",1);case i:return m(p+"Seconds",2);case r:return m(p+"Milliseconds",3);default:return this.clone()}},$.endOf=function(t){return this.startOf(t,!1)},$.$set=function(t,e){var a,o=D.p(t),d="set"+(this.$u?"UTC":""),h=(a={},a[u]=d+"Date",a[f]=d+"Date",a[l]=d+"Month",a[c]=d+"FullYear",a[s]=d+"Hours",a[i]=d+"Minutes",a[r]=d+"Seconds",a[n]=d+"Milliseconds",a)[o],m=o===u?this.$D+(e-this.$W):e;if(o===l||o===c){var v=this.clone().set(f,1);v.$d[h](m),v.init(),this.$d=v.set(f,Math.min(this.$D,v.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},$.set=function(t,e){return this.clone().$set(t,e)},$.get=function(t){return this[D.p(t)]()},$.add=function(n,d){var f,h=this;n=Number(n);var m=D.p(d),v=function(t){var e=w(h);return D.w(e.date(e.date()+Math.round(t*n)),h)};if(m===l)return this.set(l,this.$M+n);if(m===c)return this.set(c,this.$y+n);if(m===u)return v(1);if(m===o)return v(7);var g=(f={},f[i]=e,f[s]=a,f[r]=t,f)[m]||1,$=this.$d.getTime()+n*g;return D.w($,this)},$.subtract=function(t,e){return this.add(-1*t,e)},$.format=function(t){var e=this,a=this.$locale();if(!this.isValid())return a.invalidDate||h;var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=D.z(this),i=this.$H,s=this.$m,u=this.$M,o=a.weekdays,l=a.months,d=function(t,a,r,i){return t&&(t[a]||t(e,n))||r[a].substr(0,i)},c=function(t){return D.s(i%12||12,t,"0")},f=a.meridiem||function(t,e,a){var n=t<12?"AM":"PM";return a?n.toLowerCase():n},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:D.s(u+1,2,"0"),MMM:d(a.monthsShort,u,l,3),MMMM:d(l,u),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:d(a.weekdaysMin,this.$W,o,2),ddd:d(a.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(i),HH:D.s(i,2,"0"),h:c(1),hh:c(2),a:f(i,s,!0),A:f(i,s,!1),m:String(s),mm:D.s(s,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:r};return n.replace(v,(function(t,e){return e||m[t]||r.replace(":","")}))},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(n,f,h){var m,v=D.p(f),g=w(n),$=(g.utcOffset()-this.utcOffset())*e,p=this-g,y=D.m(this,g);return y=(m={},m[c]=y/12,m[l]=y,m[d]=y/3,m[o]=(p-$)/6048e5,m[u]=(p-$)/864e5,m[s]=p/a,m[i]=p/e,m[r]=p/t,m)[v]||p,h?y:D.a(y)},$.daysInMonth=function(){return this.endOf(l).$D},$.$locale=function(){return S[this.$L]},$.locale=function(t,e){if(!t)return this.$L;var a=this.clone(),n=M(t,e,!0);return n&&(a.$L=n),a},$.clone=function(){return D.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},g}(),O=b.prototype;return w.prototype=O,[["$ms",n],["$s",r],["$m",i],["$H",s],["$W",u],["$M",l],["$y",c],["$D",f]].forEach((function(t){O[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,b,w),t.$i=!0),w},w.locale=M,w.isDayjs=_,w.unix=function(t){return w(1e3*t)},w.en=S[y],w.Ls=S,w.p={},w}();const x=["innerHTML"],I={key:0,class:"login_info"},A=$(" 当前用户尚未登录,请点击下方登录 "),R={class:"login_info"},C=$("获取登录二维码"),H=$("唤醒App添加"),T={class:"login_info"},U=["src"],N={key:1},L={class:"choose"},j=$(" 请选择账号 "),J={class:"userDetail"},W={style:{"margin-right":"20px"}},E=$("修改备注"),z=$("删除账号"),F={setup(t){e("");const k=a("reload");let F=e(localStorage.getItem("USERARRAY")?JSON.parse(localStorage.getItem("USERARRAY")):[]);const Z=e(!1),P=e(!1),V=e(null),q=e(null);let B=e(0),Q=n({}),G=e(""),K=e({});const X=e(!1),tt=e(!0);let et=e(null),at=e(""),nt=e(JSON.parse(sessionStorage.getItem("INFO")));const rt=async()=>{Z.value=!0;const t=await w();200==t.status&&(V.value=t.data.data.QRCode,Q=t.data.data,Z.value=!1,clearInterval(q.value),q.value=setInterval((()=>{it()}),2500))},it=async()=>{const t=await D(Q);if(200==t.status){if(0==t.data.data.errcode){clearInterval(q.value);let e={eid:t.data.data.eid,name:t.data.data.nickName},a=localStorage.getItem("USERARRAY")?JSON.parse(localStorage.getItem("USERARRAY")):[],n=!1;return a.forEach((t=>{t.name==e.name&&(t.eid=e.eid,n=!0)})),n||a.push(e),localStorage.setItem("USERARRAY",JSON.stringify(a)),d.success(t.data.message),void k()}if(176==t.data.data.errcode)return;return d.error(t.data.message),void clearInterval(q.value)}},st=async(t,e)=>{G.value=t.key,at.value=F.value.filter((e=>e.eid==t.key))[0].name,sessionStorage.setItem("PIN",at.value);const{data:a}=await b({eid:t.key});a&&a.code?d.error(a.message):(K.value=a.data.env,K.value.timestamp=Y(K.value.timestamp).format("YYYY-MM-DD HH:mm:ss"),tt.value=!1,et.value=K.value.remarks)},ut=async()=>{const{data:t}=await M({eid:G.value,remark:et.value});d.info(t.message),X.value=!1},ot=async()=>{P.value=!0;const t=await w();Q=t.data.data;const e=`openapp.jdmobile://virtual/ad?params={"category":"jump","des":"ThirdPartyLogin","action":"to","onekeylogin":"return","url":"https://plogin.m.jd.com/cgi-bin/m/tmauth?appid=300&client_type=m&token=${t.data.data.token}","authlogin_returnurl":"weixin://","browserlogin_fromurl":"${window.location.host}"}`;window.location.href=e,P.value=!1,clearInterval(q.value),q.value=setInterval((()=>{it()}),2500)},lt=async()=>{const t=await O({eid:K.value._id});d.info(t.data.message),F.value.find(((t,e)=>{t.eid==K.value._id&&F.value.splice(e,1)})),localStorage.setItem("USERARRAY",JSON.stringify(F.value)),k()};return(async()=>{const t=await _();B.value=t.data.data})(),(t,e)=>{const a=r("a-alert"),n=r("a-button"),d=r("a-badge"),_=r("a-menu-item"),M=r("a-menu"),w=r("a-dropdown-button"),D=r("a-descriptions-item"),b=r("a-popconfirm"),O=r("a-descriptions"),k=r("a-card"),Y=r("a-input"),q=r("a-form-item"),Q=r("a-modal");return i(),s(l,null,[u(k,null,{default:o((()=>[u(a,{type:"warning"},{message:o((()=>[c("div",{innerHTML:f(nt).quiet.LOG},null,8,x)])),_:1}),0==f(F).length?(i(),s("div",I,[A,c("div",R,[u(d,{count:f(B).marginCount,"overflow-count":99},{default:o((()=>[u(n,{type:"primary",danger:"",loading:Z.value,onClick:rt},{default:o((()=>[C])),_:1},8,["loading"])])),_:1},8,["count"]),u(n,{type:"primary",loading:P.value,onClick:ot,style:{"margin-left":"20px"}},{default:o((()=>[H])),_:1},8,["loading"])]),c("div",T,[c("img",{src:V.value,alt:""},null,8,U)])])):(i(),s("div",N,[c("div",L,[u(w,null,{overlay:o((()=>[u(M,{onClick:st},{default:o((()=>[(i(!0),s(l,null,h(f(F),(t=>(i(),S(_,{key:t.eid},{default:o((()=>[u(f(m)),$(" "+p(t.name),1)])),_:2},1024)))),128))])),_:1})])),icon:o((()=>[u(f(m))])),default:o((()=>[j])),_:1})]),v(c("div",J,[u(O,{title:"账号详情",bordered:"",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},{default:o((()=>[u(D,{label:"用户名"},{default:o((()=>[$(p(f(at)),1)])),_:1}),u(D,{label:"用户id"},{default:o((()=>[$(p(f(K)._id),1)])),_:1}),u(D,{label:"cookie"},{default:o((()=>[$(p(f(K).value),1)])),_:1}),u(D,{label:"是否禁用"},{default:o((()=>[$(p(f(K).status?"禁用":"未禁用"),1)])),_:1}),u(D,{label:"是否到期"},{default:o((()=>[$(p(f(K).userStatus),1)])),_:1}),u(D,{label:"更新时间"},{default:o((()=>[$(p(f(K).timestamp),1)])),_:1}),u(D,{label:"备注"},{default:o((()=>[c("span",W,p(f(K).remarks?f(K).remarks:"无备注"),1),u(n,{type:"primary",size:"small",onClick:e[0]||(e[0]=t=>X.value=!0)},{default:o((()=>[E])),_:1}),u(b,{title:"确认删除此账号吗","ok-text":"是的","cancel-text":"劳资点错了",onConfirm:lt,onCancel:t.cancel},{default:o((()=>[u(n,{type:"primary",size:"small",danger:"",style:{"margin-left":"20px"}},{default:o((()=>[z])),_:1})])),_:1},8,["onCancel"])])),_:1})])),_:1})],512),[[g,!tt.value]])]))])),_:1}),u(Q,{visible:X.value,"onUpdate:visible":e[2]||(e[2]=t=>X.value=t),title:"修改备注",onOk:ut},{default:o((()=>[u(q,{label:"修改备注"},{default:o((()=>[u(Y,{value:f(et),"onUpdate:value":e[1]||(e[1]=t=>y(et)?et.value=t:et=t)},null,8,["value"])])),_:1})])),_:1},8,["visible"])],64)}}};export{F as default};
